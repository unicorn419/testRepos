<?xml version="1.0" encoding="utf-8" ?>
<Configurations>
  <FileProcessFlow>
    <Parser>
      <ServiceRow ServiceType="New" source="SH1:SF1" >

        <item name="BatchNumber" source="FH1#3" default="" isNeedProcess="false">
        </item>
        <item name="BatchDate" source="FH1#5" default="" isNeedProcess="false" convert="DateFormat;yyyyMMdd,yyyy-MM-dd">
        </item>
        <item name="AccountNumber" source="3" default="" isNeedProcess="false">
        </item>
        <item name="JurisdictionCode" source="1" default="" isNeedProcess="false" convert="StringReplace;PQ:QC,NF:NL" >
        </item>

        <item name="ServiceTypeId" source="" default="1" isNeedProcess="false" >
        </item>
        <item name="ContractType" source="17" default="" isNeedProcess="false" convert="StringCompare;R?Loan or Retail:Lease" >
        </item>
        <item name="ContractStartDate" source="" default="" isNeedProcess="false" convert="DateFormat;yyyyMMdd,yyyy-MM-ddT00:00:01Z">
        </item>

        <item name="LoanAmount" source="CC1#9" default="0" isNeedProcess="false">
        </item>
        <item name="ExpiryDate" source="14" default="" isNeedProcess="false" convert="DateFormat;yyyyMMdd,yyyy-MM-dd">
        </item>
        <item name="MaturityDate" source="" default="" isNeedProcess="false">
        </item>
        <item name="TermInYears" source="6" default="0" isNeedProcess="false">
        </item>


        <ServiceRow ServiceType="RegistrationDebtor" source="DB1:" >
          <item name="FirstName" source="4" default="" isNeedProcess="false">
          </item>
          <item name="MiddleName" source="5" default="" isNeedProcess="false">
          </item>
          <item name="LastName" source="6" default="" isNeedProcess="false">
          </item>
          <item name="DateOfBirth" source="7" default="" isNeedProcess="false" convert="DateFormat;yyyyMMdd,yyyy-MM-dd">
          </item>
          <item name="Street" source="AD1#1" default="" isNeedProcess="false">
          </item>
          <item name="City" source="AD1#2" default="" isNeedProcess="false">
          </item>
          <item name="JurisdictionCode" source="AD1#3" default="" isNeedProcess="false">
          </item>

          <item name="PostalOrZipCode" source="AD1#4" default="" isNeedProcess="false" convert="StringReplace; :">
          </item>
          <item name="SequenceNumber" source="INDEX" default="1" isNeedProcess="false">
          </item>

          <item name="NameTypeCode" source="" default="1" isNeedProcess="false">
          </item>
          <item name="FullName" source="8" default="" isNeedProcess="true">
            <script>
              var fullName = root.GetItem("FirstName") + " " + root.GetItem("MiddleName") + " " + root.GetItem("LastName");
              if(root.GetItem("FullName")=="")
              {
              root.SetItem("NameTypeCode","2");
              root.SetItem("FullName",fullName);
              }
              else
              {
              root.SetItem("DebtorType","1")
              }
            </script>
          </item>
          <item name="LanguageCode" source="" default="" isNeedProcess="true">
            <script>
              if(root.GetItem("JurisdictionCode")=='QC') {root.SetItem("LanguageCode","2");}
              else {root.SetItem("LanguageCode","1");}
            </script>
          </item>
        </ServiceRow>

        <item name="BillingParty" source="" default="" isNeedProcess="false">
        </item>

        <ServiceRow ServiceType="RegistrationDealer" source="SP1:" >
          <item name="DealerCode" source="2" default="" isNeedProcess="false">
          </item>
          <item name="Name" source="4" default="" isNeedProcess="false">
          </item>
          <item name="Street" source="AD1#1" default="" isNeedProcess="false">
          </item>
          <item name="City" source="AD1#2" default="" isNeedProcess="false">
          </item>
          <item name="JurisdictionCode" source="AD1#3" default="" isNeedProcess="false">
          </item>

          <item name="PostalOrZipCode" source="AD1#4" default="" isNeedProcess="false" convert="StringReplace; :">
          </item>
        </ServiceRow>

        <ServiceRow ServiceType="RegistrationSerialCollateral" source="SC1:" >
          <item name="CGESerialCollateralTypeName" source="" default="" isNeedProcess="false" >
          </item>
          <item name="CGESerialCollateralCode" source="6" default="" isNeedProcess="false" >
          </item>
          <item name="SerialNumber" source="4" default="" isNeedProcess="false">
          </item>
          <item name="Make" source="2" default="" isNeedProcess="false">
          </item>
          <item name="Model" source="3" default="" isNeedProcess="false">
          </item>
          <item name="Year" source="5" default="" isNeedProcess="false">
          </item>
          <item name="SyncId" source="" default="1" isNeedProcess="false">
          </item>
          <item name="PreviousSerialNumber" source="" default="" isNeedProcess="false">
          </item>

        </ServiceRow>

        <ServiceRow ServiceType="RegistrationJurisdictionSpecificInfo" source="SP1:" >
          <item name="OutProvince" source="4" default="" isNeedProcess="false" convert="StringCompare;X?1:0" >
          </item>
          <item name="ABTrustIndenture" source="1" default="" isNeedProcess="false" convert="StringCompare;Y?1:0">
          </item>
          <item name="BCTrustIndenture" source="1" default="" isNeedProcess="false" convert="StringCompare;Y?1:0">
          </item>
          <item name="SKTrustIndenture" source="1" default="" isNeedProcess="false" convert="StringCompare;Y?1:0">
          </item>
          <item name="MBTrustIndenture" source="1" default="" isNeedProcess="false" convert="StringCompare;Y?1:0">
          </item>
          <item name="MBPMSI" source="8" default="" isNeedProcess="false" convert="StringCompare;Y?1:0">
          </item>
          <item name="MBProceeds" source="9" default="" isNeedProcess="false" convert="StringCompare;Y?1:0">
          </item>
          <item name="MBAllProperty" source="CC1#11" default="" isNeedProcess="false" convert="StringCompare;Y?1:0">
          </item>
          <item name="ONCautionFiling" source="5" default="" isNeedProcess="false" convert="StringCompare;X?1:0">
          </item>
          <item name="ONInventory" source="CC1#2" default="" isNeedProcess="false" convert="StringCompare;I?1:0">
          </item>
          <item name="ONEquipment" source="CC1#3" default="" isNeedProcess="false" convert="StringCompare;E?1:0">
          </item>
          <item name="ONConsumerGoods" source="CC1#4" default="" isNeedProcess="false"  convert="StringCompare;C?1:0">
          </item>
          <item name="ONAccounts" source="CC1#5" default="" isNeedProcess="false"  convert="StringCompare;A?1:0">
          </item>
          <item name="ONOther" source="CC1#6" default="" isNeedProcess="false"  convert="StringCompare;O?1:0">
          </item>
          <item name="ONVehicleInclude" source="CC1#8" default="" isNeedProcess="false"  convert="StringCompare;V?1:0">
          </item>
          <item name="ExtentOfTransfer" source="" default="" isNeedProcess="false">
          </item>
          <item name="QCForm" source="SH1#12" default="" isNeedProcess="false">
          </item>
          <item name="QCNature" source="SH1#13" default="" isNeedProcess="false">
          </item>
          <item name="QCFormOfAct" source="SH4#14" default="" isNeedProcess="false">
          </item>
          <item name="SingleRegistration" source="12" default="" isNeedProcess="false" convert="StringCompare;Y?1:0">
          </item>
        </ServiceRow>

      </ServiceRow>

      <ServiceRow ServiceType="Renew" source="SH2:SF2">
      </ServiceRow>

      <ServiceRow ServiceType="Discharge" source="SH0:SF0">
        <item name="ContractStartDate" source="16" default="T00:00:01Z" isNeedProcess="false" convert="DateFormat;yyyyMMdd,yyyy-MM-ddT00:00:01Z">
        </item>
        <item name="BatchNumber" source="//Xif-Document/Batch/@Number" default="" isNeedProcess="false">
        </item>
        <item name="AccountNumber" source="Partner-Reference" default="" isNeedProcess="false">
        </item>
        <item name="RegistrationNumber" source="PPR-Registration-Number" default="" isNeedProcess="false">
        </item>
        <item name="PPRProvince" source="PPR/@Province" default="" isNeedProcess="false">
        </item>
        <item name="Transit" source="Party-List/Billing-Party/Branch-Transit" default="" isNeedProcess="false">
        </item>
        <item name="ServiceTypeId" source="" default="2" isNeedProcess="false" >
        </item>
        <item name="ContractCode" source="" default="Retail" isNeedProcess="false" >
        </item>

        <item name="LVSCode" source="" default="N/A" isNeedProcess="false">
        </item>
        <item name="RegistrationContractParentId" source="" default="" isNeedProcess="false">
        </item>
        <item name="ContractCity" source="" default="" isNeedProcess="false">
        </item>
        <item name="ContractProvince" source="" default="" isNeedProcess="false">
        </item>
        <item name="TermUnit" source="" default="0" isNeedProcess="false">
        </item>
        <item name="ExpiryDate" source="" default="" isNeedProcess="false">
        </item>
        <item name="MaturityDate" source="" default="" isNeedProcess="false">
        </item>
        <item name="LoanAmount" source="" default="0" isNeedProcess="false">
        </item>
        <item name="RecordStatusId" source="" default="0" isNeedProcess="false">
        </item>
        <item name="EFProvinceMismatch" source="" default="" isNeedProcess="false">
        </item>
        <item name="PreviousAccountNumber" source="" default="" isNeedProcess="false">
        </item>
        <item name="IsCurrentData" source="" default="1" isNeedProcess="false">
        </item>
        <item name="DateInserted" source="" default="" isNeedProcess="false">
        </item>
        <item name="DescriptionOfChange" source="" default="" isNeedProcess="false">
        </item>

      </ServiceRow>

      <ServiceRow ServiceType="amendment" source="">
      </ServiceRow>

      <ServiceRow ServiceType="expire" source="">
      </ServiceRow>


    </Parser>

  </FileProcessFlow>


</Configurations>
